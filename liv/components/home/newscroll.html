<div id="background-container" class="background-container">
    <div id="video-container" class="video-container">
        <video src="../media/video/output3.mp4" type="video/mp4" id="bgVideo" autoplay muted="muted" playsinline="" controlslist="nodownload"></video>
    </div>
</div>

<div id="scroll-container" class="scroll-container">

    <section id="step0" class="step"></section>
    
    <section id="step1" class="step">
        <div><h3>Where all your devices are connected</h3></div>
    </section>

    <section id="step2" class="step">
        <div><h3>Where your “smart home” <br> monitors your health condition</h3></div>
    </section>

    <section id="step3" class="step">
        <div><h3>Where every time you pick up your phone, <br> drive your car, sit in front of <br> your computer or watch TV</h3></div>
    </section>

    <section id="step4" class="step">
        <div><h3>the built-in camera monitor your health condition</h3></div>
    </section>

    <section id="step5" class="step">
        <div><h3>Where the wireless signals around you<br>tracks your health in an unobtrusive manner</h3></div>
    </section>

    <section id="step6" class="step">
        <div><h3></h3></div>
    </section>

    <section id="step7" class="step">
        <div><h3>where your digital footprint – wherever you are</h3></div>
    </section>

    <section id="step8" class="step">
        <div><h3>is turned into health data</h3></div>
    </section>

    <section id="step9" class="step">
        <div><h3></h3></div>
    </section>

    <section id="step10" class="step">
        <div><h3></h3></div>
    </section>
<!-- 
    <section id="step10" class="step">
        <div><h3></h3></div>
    </section> -->

</div>

<script>
    
//GSAP
gsap.registerPlugin(ScrollTrigger);

const bgVvideo = document.querySelector("#bgVideo");

bgVideo.pause();
bgVideo.currentTime = 0;

let sections = gsap.utils.toArray(".step");
sections.forEach((step, i) => {
    
    const tl = gsap.timeline({
            defaults: {duration: 1},
            scrollTrigger: {
            trigger: step,
            markers: false,
            scrub: true,
            start: "center 50%",
            end: "bottom top",
            pin: true
        }

    })
    .fromTo(step, {y: 60}, {y: -80})
    .from(step, {opacity: 0, duration: 0.3}, 0)
    .to(step, {opacity: 0, duration: 0.2}, 0.8);

    gsap.fromTo(bgVideo, { currentTime: 3 * i }, {
        scrollTrigger: {
            trigger: step,
            scrub: 2,
            start: "top bottom",
            end: "bottom bottom",
        },
        currentTime: 3 * (i + 1),
        duration: 3,
        ease: "none",

    });

});
    
const container = document.getElementById("background-container");

function scrollContainer() {
    var containerEdge = document.getElementById("scroll-container").getBoundingClientRect();

    if (0 >= (containerEdge.bottom + window.innerHeight)){
        container.style.display = "none";
    } else {
        container.style.display = "flex";
    }
}
window.addEventListener("scroll", scrollContainer);
</script>